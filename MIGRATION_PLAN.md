# План миграции NeverLands в Telegram Mini App

## Текущий статус проекта

### Исходный проект (PHP)
- **Размер**: ~46MB (в основном изображения)
- **Архитектура**: Монолитный PHP с фреймами
- **База данных**: MySQL (nl), 18 таблиц
- **Основные файлы**:
  - `main.php` - главный контроллер
  - `ch.php` - чат и список игроков
  - `inc/hedder.php` - навигация
  - `inc/forpost/*` - локации (21 файл)
  - `func/sql_func.php` - основные функции

### Что нужно портировать

#### 1. Backend API (Приоритет: ВЫСОКИЙ)
- [x] `/api/auth` - авторизация через Telegram
- [ ] `/api/player` - данные персонажа
- [ ] `/api/inventory` - инвентарь
- [ ] `/api/market` - магазин
- [ ] `/api/map` - карта и перемещения
- [ ] `/api/chat` - чат
- [ ] `/api/battle` - бои

#### 2. Frontend (React) (Приоритет: ВЫСОКИЙ)
- [ ] Главный экран (персонаж)
- [ ] Инвентарь
- [ ] Магазин
- [ ] Карта
- [ ] Чат
- [ ] Бои

#### 3. Ассеты (Приоритет: СРЕДНИЙ)
- [ ] Копировать все изображения (46MB)
- [ ] Оптимизировать для мобильных
- [ ] Создать спрайты

#### 4. База данных (Приоритет: ВЫСОКИЙ)
- [ ] Добавить поле `telegram_id` в таблицу `user`
- [ ] Создать индексы для производительности
- [ ] Миграционные скрипты

## Подход к миграции

### Фаза 1: MVP (Минимально жизнеспособный продукт)
**Срок**: 1-2 дня
- ✅ Структура проекта
- ✅ Конфигурация
- ✅ Авторизация через Telegram
- Player API (чтение данных)
- Простой фронтенд (показ персонажа)

### Фаза 2: Основной функционал
**Срок**: 3-5 дней
- Inventory API + UI
- Market API + UI
- Map API + UI
- Перенос изображений

### Фаза 3: Дополнительный функционал
**Срок**: 5-7 дней
- Chat API + UI
- Battle system
- Боты/NPC
- Оптимизация

## Автоматизация

### Скрипты для автоматического портирования:

1. **copy_images.php** - копирует все изображения
2. **generate_api.php** - генерирует API из PHP функций
3. **extract_data_models.php** - создает модели данных
4. **test_endpoints.php** - тестирует все API

## Архитектура нового проекта

```
NLTv1/
├── backend/
│   ├── api/           # REST API endpoints
│   ├── config/        # Конфигурация
│   ├── models/        # Модели данных
│   └── utils/         # Утилиты
├── frontend/
│   ├── src/
│   │   ├── App.js           # Главный компонент
│   │   ├── pages/           # Страницы
│   │   │   ├── Character.js
│   │   │   ├── Inventory.js
│   │   │   ├── Market.js
│   │   │   ├── Map.js
│   │   │   └── Chat.js
│   │   ├── components/      # Компоненты
│   │   ├── services/        # API клиент
│   │   └── telegram/        # Telegram WebApp SDK
│   └── public/
│       └── images/          # 46MB изображений
└── database/
    └── migrations/          # SQL скрипты

## Следующие шаги

1. ✅ Создать структуру проекта
2. ✅ Настроить backend конфигурацию
3. ✅ Создать API роутер
4. ✅ Реализовать авторизацию
5. [ ] Создать скрипт копирования ассетов
6. [ ] Создать Player API
7. [ ] Создать базовый React frontend
8. [ ] Интегрировать Telegram WebApp SDK
9. [ ] Локальное тестирование
10. [ ] Deploy и тестирование в Telegram
```
